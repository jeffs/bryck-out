#!/usr/bin/env python3
#
# This script initializes a Python virtual environment.

import subprocess

def run(command):
    result = subprocess.run(command.split())
    if result.returncode != 0:
        print(result)
        raise Exception('command returned non-zero status: ' + command)

def find_python():
    try:
        run('python3 -V')
        return 'python3'
    except:
        run('python -V')
        return 'python'

run(find_python() + ' -m venv venv')
run('venv/bin/pip install --upgrade pip')
run('venv/bin/pip install wheel')
run('venv/bin/pip install --requirement requirements.txt')

print('Virtual environment initialized.  Ready for activation.')
